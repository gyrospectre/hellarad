<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Architecture on Squyre Documentation</title><link>https://gyrospectre.github.io/squyre/architecture/</link><description>Recent content in Architecture on Squyre Documentation</description><generator>Hugo</generator><language>en</language><lastBuildDate>Mon, 13 Jun 2022 12:05:08 +1000</lastBuildDate><atom:link href="https://gyrospectre.github.io/squyre/architecture/index.xml" rel="self" type="application/rss+xml"/><item><title>A Note On Error Handling</title><link>https://gyrospectre.github.io/squyre/architecture/errors/</link><pubDate>Sat, 05 Feb 2022 14:16:07 +1100</pubDate><guid>https://gyrospectre.github.io/squyre/architecture/errors/</guid><description>&lt;p>Because of the way Squyre is used, we&amp;rsquo;re looking for short and sharp lookups for which failures are not the end of the world.&lt;/p>
&lt;p>For example; if an alert fires for suspicious activity and we&amp;rsquo;re not able to get additional information from Greynoise, this doesn&amp;rsquo;t stop the analyst from getting on with things, it&amp;rsquo;s just that some manual work might be needed to do what Squyre would otherwise had done!&lt;/p></description></item><item><title>Architecture</title><link>https://gyrospectre.github.io/squyre/architecture/architecture/</link><pubDate>Sat, 05 Feb 2022 14:16:07 +1100</pubDate><guid>https://gyrospectre.github.io/squyre/architecture/architecture/</guid><description>&lt;p>Squyre is serverless, and uses AWS services SNS, API Gateway, Lambda and Step Functions to do it&amp;rsquo;s thing.&lt;/p>
&lt;p>Alerts are sent in via SNS or Webhook, which triggers the first Lambda function, &lt;code>conductor&lt;/code>. This function takes the alert body, extracts IP addresses, domain names, URLs and hostnames, and then starts the step function with this information. Note that any Microsoft 365 ATP Safe Links are also converted into their original URLs at this stage.&lt;/p></description></item><item><title>State Machine</title><link>https://gyrospectre.github.io/squyre/architecture/state/</link><pubDate>Sat, 05 Feb 2022 14:16:07 +1100</pubDate><guid>https://gyrospectre.github.io/squyre/architecture/state/</guid><description>&lt;p>The main state machine is called &lt;code>EnrichStateMachine&lt;/code>, because it, uh enriches, and it&amp;rsquo;s a state machine.&lt;/p>
&lt;p>It is defined by &lt;code>statemachine/enrich.asl.json&lt;/code> in the &lt;a
 class="gdoc-markdown__link"
 href="https://docs.aws.amazon.com/step-functions/latest/dg/concepts-amazon-states-language.html"
>AWS ASL language&lt;/a>.&lt;/p>
&lt;p>Layout is straightforward; nested parallel branches run the enrichment tasks which are sent to the output function at the end to update alerts/tickets.&lt;/p>
&lt;img src="https://gyrospectre.github.io/squyre/squyre/media/statemachine.png" alt="Enrich State Machine" width="75%" /></description></item></channel></rss>